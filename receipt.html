<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏≠‡∏≠‡∏Å‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à - ‡πÄ‡∏ï‡∏°‡∏µ‡∏¢‡πå ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 40px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    input, select, textarea {
      padding: 8px;
      margin-top: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      background-color: #4CAF50;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      margin-top: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    }
    .receipt {
      display: none;
      margin-top: 50px;
      padding: 40px;
      border: 1px solid #000;
      background-color: #fff;
      font-family: 'cordia new', sans-serif;
      font-size: 22px;
    }
    .receipt h2, .receipt p {
      text-align: center;
      margin: 4px 0;
    }
    .receipt hr {
      border: none;
      border-top: 2px solid #000;
      margin: 20px 0;
    }
    .receipt .details, .receipt .summary {
      margin: 10px 0;
    }
    .receipt ul {
      list-style-type: none;
      padding-left: 0;
    }
    .receipt li {
      margin-bottom: 6px;
    }
    @media print {
      body * {
        visibility: hidden;
      }
      .receipt, .receipt * {
        visibility: visible;
      }
      .receipt {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        background-color: white;
      }
    }
    .actions button {
      margin-right: 5px;
      background-color: #2196F3;
    }
    .actions .delete {
      background-color: #f44336;
    }
    #saveBtn {
      background-color: #FF9800;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>‡∏≠‡∏≠‡∏Å‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à - ‡πÄ‡∏ï‡∏°‡∏µ‡∏¢‡πå ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</h2>
    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏£‡∏ñ</label><br>
    <input type="text" id="customer" style="width:100%">

    <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
    <table>
      <thead>
        <tr>
          <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
          <th>‡∏£‡∏≤‡∏Ñ‡∏≤ ‡∏ï‡πà‡∏≠‡∏•‡∏±‡∏á(‡∏ö‡∏≤‡∏ó)</th>
          <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô ‡∏•‡∏±‡∏á</th>
          <th>‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥</th>
        </tr>
      </thead>
      <tbody id="itemTable"></tbody>
    </table>
    <button onclick="addItem()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
    <button id="saveBtn" onclick="saveChanges()">üíæ ‡πÄ‡∏ã‡∏ü‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
    <button onclick="generateReceipt()">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</button>

    <div class="receipt" id="receipt">
      <h2>‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</h2>
      <p>‡πÄ‡∏ï‡∏°‡∏µ‡∏¢‡πå ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</p>
      <p>138/2 ‡∏´‡∏°‡∏π‡πà 7 ‡∏ï.‡∏ß‡∏±‡∏î‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå ‡∏≠.‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏à.‡∏û‡∏¥‡∏©‡∏ì‡∏∏‡πÇ‡∏•‡∏Å 65000</p>
      <p>‡πÇ‡∏ó‡∏£: 081-8889872</p>
      <hr>
      <div class="details">
        <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</strong> <span id="r_customer"></span></p>
        <p><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> <span id="r_date"></span></p>
      </div>
      <hr>
      <ul id="r_items"></ul>
      <hr>
      <div class="summary">
        <p><strong>‡∏£‡∏ß‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> <span id="r_total"></span> ‡∏ö‡∏≤‡∏ó</p>
      </div>
      <p style="text-align: center; margin-top: 40px;">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>
      <div style="text-align: center; margin-top: 20px;">
        <button onclick="window.print()">‡∏û‡∏¥‡∏°‡∏û‡πå</button>
      </div>
    </div>
  </div>

  <script>
    let prices = JSON.parse(localStorage.getItem('prices')) || {
      "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏ä‡πâ‡∏≤‡∏á": 18,
      "‡πÄ‡∏ö‡∏µ‡∏¢‡∏£‡πå‡∏•‡∏µ‡πÇ‡∏≠": 10,
      "‡πÑ‡∏Æ‡πÄ‡∏ô‡πÄ‡∏Å‡πâ‡∏ô620": 16,
      "‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤‡∏Ñ‡∏≠‡∏¢‡∏≤‡∏ß": 21,
      "‡∏ô‡πâ‡∏≥‡∏´‡∏ß‡∏≤‡∏ô": 15,
      "‡∏û‡∏£‡∏ó‡∏¥‡∏û‡∏¢‡πå": 23,
      "‡∏´‡∏á‡∏™‡πå‡πÅ‡∏ö‡∏ô‡∏ï‡∏±‡∏ß‡∏ô‡∏π‡∏ô": 11,
      "‡∏´‡∏á‡∏™‡πå‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏±‡∏ß‡∏ô‡∏π‡∏ô": 18,
      "‡∏™‡∏¥‡∏á‡∏´‡πå‡πÉ‡∏´‡∏ç‡πà": 9,
      "‡∏™‡∏¥‡∏á‡∏´‡πå‡πÄ‡∏•‡πá‡∏Å": 15,
      "‡πÄ‡∏´‡∏•‡πâ‡∏≤‡πÉ‡∏´‡∏ç‡πà": 14,
      "‡πÄ‡∏´‡∏•‡πâ‡∏≤‡πÄ‡∏•‡πá‡∏Å": 25,
      "‡πÅ‡∏™‡∏á‡∏Å‡∏•‡∏°": 23,
      "‡πÄ‡∏´‡∏•‡πâ‡∏≤‡πÉ‡∏´‡∏ç‡πà‡∏£‡∏ß‡∏á‡∏Ç‡πâ‡∏≤‡∏ß": 11,
      "‡πÄ‡∏´‡∏•‡πâ‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏£‡∏ß‡∏á‡∏Ç‡πâ‡∏≤‡∏ß": 21,
      "‡πÄ‡∏´‡∏•‡πâ‡∏≤‡πÉ‡∏´‡∏ç‡πà‡∏ï‡∏∞‡∏ß‡∏±‡∏ô‡πÅ‡∏î‡∏á": 11,
      "700cc": 21

    };

    const itemTable = document.getElementById("itemTable");

    function renderItems() {
      itemTable.innerHTML = '';
      Object.entries(prices).forEach(([name, price]) => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td><input type="text" value="${name}" onchange="renameItem('${name}', this.value)"></td>
          <td><input type="number" id="price_${name}" value="${price}" onchange="updatePrice('${name}', this.value)"></td>
          <td><input type="number" id="qty_${name}" min="0" value="0" style="width: 60px;"></td>
          <td class="actions">
            <button class="delete" onclick="deleteItem('${name}')">‡∏•‡∏ö</button>
          </td>
        `;
        itemTable.appendChild(row);
      });
    }

    function renameItem(oldName, newName) {
      if (newName && !prices[newName]) {
        prices[newName] = prices[oldName];
        delete prices[oldName];
        renderItems();
      }
    }

    function updatePrice(name, newPrice) {
      prices[name] = parseFloat(newPrice);
    }

    function deleteItem(name) {
      delete prices[name];
      renderItems();
    }

    function addItem() {
      let newName = prompt("‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà:");
      if (newName && !prices[newName]) {
        prices[newName] = 0;
        renderItems();
      }
    }

    function saveChanges() {
      localStorage.setItem('prices', JSON.stringify(prices));
      alert("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
    }

    function generateReceipt() {
      const customer = document.getElementById('customer').value;
      const rItems = document.getElementById('r_items');
      const rTotal = document.getElementById('r_total');
      const rCustomer = document.getElementById('r_customer');
      const rDate = document.getElementById('r_date');
      rItems.innerHTML = '';
      let total = 0;

      Object.keys(prices).forEach(name => {
        const qtyInput = document.getElementById(`qty_${name}`);
        const priceInput = document.getElementById(`price_${name}`);
        if (qtyInput && priceInput) {
          const qty = parseInt(qtyInput.value);
          const price = parseFloat(priceInput.value);
          if (qty > 0) {
            const itemTotal = price * qty;
            total += itemTotal;
            const li = document.createElement('li');
            li.textContent = `${name} x ${qty} = ${itemTotal.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó`;
            rItems.appendChild(li);
          }
        }
      });

      rCustomer.textContent = customer;
      rDate.textContent = new Date().toLocaleDateString('th-TH');
      rTotal.textContent = total.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
      document.getElementById('receipt').style.display = 'block';
    }

    renderItems();
  </script>
</body>
</html>
